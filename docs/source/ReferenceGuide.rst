.. _reference-guide:

===============
Reference Guide
===============

This guide presents information on the Avocado-virt basic design and its internals.

.. _available_params:

Basic avocado-virt params
=========================

Avocado-virt uses test params to affect the environment independently on the
test code. This can be used to reproduce the same steps on different setup,
for example various disk drivers. You can set these via multiplex ``YAML``
file.

Table of supported params:

+-------------------------------+----------------------------+---------------------------------------------------------------------+
| Params path                   | Params key                 | Description                                                         |
+===============================+============================+=====================================================================+
| /plugins/virt/guest/*         | disable_restore_image_test | Don't restore the image after each test                             |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/guest/*         | image_path                 | Path to the guest image                                             |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/guest/*         | password                   | Guest remote login password                                         |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/guest/*         | shell_prompt               | Regexp of the guest remote command line                             |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/guest/*         | user                       | Guest remote login name                                             |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/qemu/migrate/*  | timeout                    | Migration timeout                                                   |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/qemu/paths/*    | qemu_bin                   | Path to the QEMU executable file                                    |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/qemu/paths/*    | qemu_img_bin               | Path to the qemu-img executable file                                |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/qemu/paths/*    | qemu_io_bin                | Path to the qemu-io executable file                                 |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/qemu/template/* | contents                   | Template of the QEMU command to be run instead of autogenerated one |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/screendumps/*   | enable                     | Enable screendump service                                           |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/screendumps/*   | interval                   | Interval between screendumps                                        |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/videos/*        | enable                     | Encode screendumps into video after the test                        |
+-------------------------------+----------------------------+---------------------------------------------------------------------+
| /plugins/virt/videos/*        | jpeg_quality               | Quality of the screendump image postprocessing                      |
+-------------------------------+----------------------------+---------------------------------------------------------------------+

.. note:: Some of these values can be modified in config files and/or
   overridden on the command line. To view the setting on your system run
   ``avocado multiplex -s -c`` with avocado-virt enabled.

.. note:: Not all params are used in every run, some of them depends on each
   other or on features touched in the test (for example when your test
   doesn't use qemu-io executing the test with various values makes no sense.
   Changing the qemu_bin on the other hand makes the test executed on
   different QEMU versions.)
